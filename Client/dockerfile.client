# Utilisation de base node + install des deps
FROM node:18

WORKDIR /app

COPY package*.json ./
RUN yarn install

COPY . .

# On reconstruit avec les variables d'env Ã  disposition
ENV VITE_AUTH0_DOMAIN=$VITE_AUTH0_DOMAIN
ENV VITE_AUTH0_CLIENT_ID=$VITE_AUTH0_CLIENT_ID
ENV VITE_AUTH0_CALLBACK_URL=$VITE_AUTH0_CALLBACK_URL

RUN yarn build

EXPOSE 5173
CMD ["yarn", "dev"]
